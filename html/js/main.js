"use strict";var animations_js={get animateElement(){return animateElement},get animateScroll(){return animateScroll},get fadeIn(){return fadeIn},get fadeOut(){return fadeOut}};function whichTransitionEvent(){let t;const e=document.createElement("fakeelement"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}const transitionEvent=whichTransitionEvent();function animateElement(t,e,n,a,i){return new Promise(s=>{if(t.style.transform===e)return void s();const r=e=>{t.removeEventListener(transitionEvent,r),t.style.willChange="initial",t.style.transition="initial",requestAnimationFrame(s)};n||(n=300),i||(i=0),t.addEventListener(transitionEvent,r,!0),t.style.willChange="transform opacity",t.style.transition=`all ${n}ms ease-in-out ${i}ms`,requestAnimationFrame(n=>{t.style.transform=e,void 0!==a&&(t.style.opacity=a)})})}function fadeIn(t){return new Promise(e=>{if(1===t.style.opacity)return void e();let n=0;const a=i=>{clearTimeout(n),t.removeEventListener(transitionEvent,a),t.style.willChange="initial",t.style.transition="initial",requestAnimationFrame(e)};t.addEventListener(transitionEvent,a,!0),t.style.willChange="opacity",t.style.transition="opacity 200ms ease-in-out 0s",requestAnimationFrame(e=>{n=setTimeout(a,250),t.style.opacity=1})})}function fadeOut(t){return new Promise(e=>{if(0===t.style.opacity)return void e();let n=0;var a=i=>{clearTimeout(n),t.removeEventListener(transitionEvent,a),t.style.willChange="initial",t.style.transition="initial",requestAnimationFrame(e)};t.addEventListener(transitionEvent,a,!0),t.style.willChange="opacity",t.style.transition="opacity 200ms ease-in-out 0s",requestAnimationFrame(e=>{n=setTimeout(a,250),t.style.opacity=0})})}function animateScroll(){return new Promise(t=>{const e=document.querySelector("#container"),n=document.querySelector("#content");animateElement(n,`translateY(${e.scrollTop}px)`,350).then(a=>{n.style.transform="initial",e.scrollTop=0,t()})})}class Toast{constructor(t,e){this._transitionEnd=this._transitionEnd.bind(this),this._cleanUp=this._cleanUp.bind(this),this._checkPrevious().then(n=>{this._timer=!1,this._timeout=1e3*e||4500,this.toast=this._createToast(),this.toast.addEventListener(transitionEvent,this._transitionEnd,!0),this.toast.addEventListener("click",this._cleanUp,!0),this.toast.textContent=t,document.querySelector("body").appendChild(this.toast),attachButtonRipple(this.toast),setTimeout(t=>requestAnimationFrame(t=>{this.toast.style.opacity=1,this.toast.style.transform="translateY(0px)"}),50)})}_checkPrevious(){return new Promise(t=>{let e=document.querySelector("#toast");e?(e.addEventListener(transitionEvent,n=>{e.parentNode&&e.parentNode.removeChild(e),t()}),requestAnimationFrame(t=>{e.style.opacity=0,e.style.transform="translateY(80px)"})):t()})}_createToast(){const t=document.createElement("div");return t.id="toast",t.classList.add("toast"),t.style.opacity=0,t.style.transform="translateY(80px)",t.style.willChange="transform opacity",t.style.transition="all 300ms ease-in-out 0ms",t}_cleanUp(){this._timer&&(clearTimeout(this._timer),this._timer=!1),this.toast.addEventListener(transitionEvent,t=>{this.toast.parentNode&&this.toast.parentNode.removeChild(this.toast)}),requestAnimationFrame(t=>{this.toast.style.opacity=0,this.toast.style.transform="translateY(80px)"})}_transitionEnd(){this._timer=setTimeout(this._cleanUp,this._timeout),this.toast.removeEventListener(transitionEvent,this._transitionEnd)}}function qs(t,e){return(e||document).querySelector(t)}function qsa(t,e){return(e||document).querySelectorAll(t)}var ripples_js={get attachButtonRipple(){return ripples_js__attachButtonRipple},get attachRoundButtonRipple(){return attachRoundButtonRipple}};function ripples_js__attachButtonRipple(t){t.PaperRipple=new PaperRipple,t.appendChild(t.PaperRipple.$),t.addEventListener("mousedown",e=>t.PaperRipple.downAction(e)),t.addEventListener("mouseup",e=>t.PaperRipple.upAction())}function attachRoundButtonRipple(t){t.PaperRipple=new PaperRipple,t.appendChild(t.PaperRipple.$),t.PaperRipple.$.classList.add("paper-ripple--round"),t.PaperRipple.recenters=!0,t.PaperRipple.center=!0,t.addEventListener("mousedown",e=>t.PaperRipple.downAction(e)),t.addEventListener("mouseup",e=>t.PaperRipple.upAction())}function loadCSSFile(t){return new Promise((e,n)=>{const a=document.createElement("link");a.href=t,a.type="text/css",a.rel="stylesheet",a.onload=e,a.onerror=n,qs("head").appendChild(a)})}function loadJSFile(t){return new Promise((e,n)=>{const a=document.createElement("script");a.async=!0,a.defer=!0,a.src=t,a.onload=requestAnimationFrame(e),a.onerror=n,qs("body").appendChild(a)})}function applyRipples(){return new Promise(t=>{qsa(".button").forEach(ripples_js.attachButtonRipple),qsa(".icon-button").forEach(ripples_js.attachRoundButtonRipple),qsa(".link").forEach(ripples_js.attachButtonRipple),t()})}function loadRipples(){return new Promise((t,e)=>{loadCSSFile("../css/paper-ripple.min.css").then(n=>loadJSFile("../js/paper-ripple.min.js").then(e=>setTimeout(e=>applyRipples(t),50)).catch(e))})}function cascadeCards(t){return new Promise(e=>{const n=qsa(".card",t);for(var a=0;a<n.length;a++)n[a].style.display="block",animations_js.animateElement(n[a],"translateX(0)",200,1,50*a)})}function createWrapper(){const t=document.createElement("div");return t.style.display="flex",t.style.justifyContent="space-between",t.style.alignItems="center",t}function createCard(){const t=document.createElement("div");return t.classList.add("card"),t.style.transform="translateX(50%)",t.style.opacity=0,t.style.display="none",t}function createSVG(t,e,n){const a=createWrapper();a.style.margin="0 0.2em",a.title=n+": "+e;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.width="24px",i.style.height="24px",i.style.marginRight="8px",i.setAttributeNS(null,"viewbox","0 0 24 24");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",t),s.style.stroke="#00000",i.appendChild(s),a.appendChild(i);const r=document.createElement("div");return r.style="font-size: 12px;",r.textContent=e,a.appendChild(r),a}function parseTopData(t){setTimeout(t=>{var e=qs("#load");animations_js.animateElement(e,"translateY(-102%)",350)},1e3);for(let l=0;l<t.length;l++){const p=createWrapper(),c=createCard();c.classList.add("stat");const d=document.createElement("div");d.textContent=t[l].name,d.title=t[l].name,d.style="text-align: left; font-size: 14pt; overflow: hidden;";var e=document.createElement("div");e.style.display="inline-flex";var n=createSVG("M7,5H23V9H22V10H16A1,1 0 0,0 15,11V12A2,2 0 0,1 13,14H9.62C9.24,14 8.89,14.22 8.72,14.56L6.27,19.45C6.1,19.79 5.76,20 5.38,20H2C2,20 -1,20 3,14C3,14 6,10 2,10V5H3L3.5,4H6.5L7,5M14,12V11A1,1 0 0,0 13,10H12C12,10 11,11 12,12A2,2 0 0,1 10,10A1,1 0 0,0 9,11V12A1,1 0 0,0 10,13H13A1,1 0 0,0 14,12Z",t[l].kills,"Kills"),a=createSVG("M12,2A9,9 0 0,0 3,11C3,14.03 4.53,16.82 7,18.47V22H9V19H11V22H13V19H15V22H17V18.46C19.47,16.81 21,14 21,11A9,9 0 0,0 12,2M8,11A2,2 0 0,1 10,13A2,2 0 0,1 8,15A2,2 0 0,1 6,13A2,2 0 0,1 8,11M16,11A2,2 0 0,1 18,13A2,2 0 0,1 16,15A2,2 0 0,1 14,13A2,2 0 0,1 16,11M12,14L13.5,17H10.5L12,14Z",t[l].deaths,"Deaths"),i=createSVG("M3 18.34C3 18.34 4 7.09 7 3L12 4L11 7.09H9V14.25H10C12 11.18 16.14 10.06 18.64 11.18C21.94 12.71 21.64 17.32 18.64 19.36C16.24 21 9 22.43 3 18.34Z",t[l].kdr,"KDR");p.appendChild(d);var s=favWeapon(t[l]);const m=createWrapper();m.title=s[0]+": "+s[1];var r=document.createElement("div"),o=document.createElement("div");switch(r.style.marginRight="8px",r.style.marginLeft="8px",r.classList.add("favWeapon"),s[0]){case"grenade_frag":r.textContent="_";break;case"357":r.textContent="$";break;case"shotgun":r.textContent="(";break;case"pistol":r.textContent="%";break;case"smg1":r.textContent="&"}o.textContent=s[1],m.appendChild(r),m.appendChild(o),e.appendChild(n),e.appendChild(a),e.appendChild(i),e.appendChild(m),p.appendChild(e),c.appendChild(p),qs("#cardsWrapper").appendChild(c)}}function parseServerStatus(t){if("Server is offline"!==t){qs(".hostname").textContent=t.name,qs("#numPlayers").textContent=t.maxplayers,qs("#map").textContent=t.map;var e=qs("#players");if(e.innerHTML="",0===t.players.length){var n=document.createElement("div");n.textContent="No Players Online",e.appendChild(n)}else for(var a=0;a<t.players.length;a++){var i=document.createElement("div");i.classList.add("playeronline");var s=document.createElement("div");s.textContent=t.players[a].name;var r=document.createElement("div");r.textContent=t.players[a].score,i.appendChild(s),i.appendChild(r),e.appendChild(i);var o=document.createElement("div");o.classList.add("spacer"),e.appendChild(o)}document.title=t.name}}function fetchServerStatus(){fetch("/api/status").then(t=>{200===t.status?t.json().then(parseServerStatus):console.error(t.status)})}function fetchTop(){fetch("/api/stats").then(t=>{200===t.status?t.json().then(parseTopData):console.error(t.status)})}function registerServiceWorker(){return new Promise((t,e)=>{"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register("../sw.js").then(t).catch(e):t()})}function favWeapon(t){var e=0,n="";for(var a in t)"name"!==a&&"id"!==a&&"ip"!==a&&"kills"!==a&&"deaths"!==a&&t[a]>e&&(e=t[a],n=a);return[n,e]}HTMLElement.prototype.onClick=function(t){this.addEventListener("click",t,!1)},HTMLElement.prototype.atZero=function(t){this.addEventListener("zero",t,!1)},qs(".wrapper").onscroll=(t=>requestAnimationFrame(e=>{const n=qs("#info").offsetHeight,a=qs("#cardsWrapper"),i=t.target.scrollTop,s=qs("#fab");var r=i/6;let o=128-r;o<=65&&(o=65),i>n?(cascadeCards(a),animations_js.animateElement(s,"translateY(0px)")):animations_js.animateElement(s,"translateY(80px)");let l=1-r/135;l<=.495&&(l=.495),l>=1&&(l=1),qs(".avatar").style.transform=`scale(${l})`,qs(":root").style.setProperty("--header-height",`${o}px`)})),qs("#join").onClick(t=>{window.location.href="steam://connect/hl2dm.dough10.me:27015"}),qs("#discord").onClick(t=>{window.location.href="https://discord.gg/CW3b92"}),qs("#github").onClick(t=>{window.location.href="https://github.com/dough10"}),qs("#paypal").onClick(t=>{window.location.href="https://www.paypal.me/jdough10"}),qs("#demos").onClick(t=>{window.location.href="https://hl2dm.dough10.me/api/demos"}),qs("#fab").onClick(animations_js.animateScroll),window.onload=registerServiceWorker().then(t=>{fetchServerStatus(),setInterval(fetchServerStatus,5e3),fetchTop(),console.log(t)}).then(loadRipples);